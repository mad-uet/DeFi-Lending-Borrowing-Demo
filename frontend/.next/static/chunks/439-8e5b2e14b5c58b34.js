"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[439],{9448:function(e,t,a){a.d(t,{ToastContainer:function(){return h},Z:function(){return u}});var r=a(7437),n=a(2265),o=a(6955);let i={success:"✓",error:"✕",warning:"⚠",info:"ℹ",liquidation:"\uD83D\uDD25"},l={success:{bg:"bg-green-50 dark:bg-green-900/30",border:"border-green-200 dark:border-green-700",icon:"bg-green-500 text-white",text:"text-green-800 dark:text-green-200"},error:{bg:"bg-red-50 dark:bg-red-900/30",border:"border-red-200 dark:border-red-700",icon:"bg-red-500 text-white",text:"text-red-800 dark:text-red-200"},warning:{bg:"bg-yellow-50 dark:bg-yellow-900/30",border:"border-yellow-200 dark:border-yellow-700",icon:"bg-yellow-500 text-white",text:"text-yellow-800 dark:text-yellow-200"},info:{bg:"bg-blue-50 dark:bg-blue-900/30",border:"border-blue-200 dark:border-blue-700",icon:"bg-blue-500 text-white",text:"text-blue-800 dark:text-blue-200"},liquidation:{bg:"bg-orange-50 dark:bg-orange-900/30",border:"border-orange-200 dark:border-orange-700",icon:"bg-gradient-to-r from-orange-500 to-red-500 text-white",text:"text-orange-800 dark:text-orange-200"}};function s(e){let{notification:t,onClose:a,onRead:o}=e,[s,c]=(0,n.useState)(!1),[u,d]=(0,n.useState)(!1),h=l[t.type],m=i[t.type];return(0,n.useEffect)(()=>{requestAnimationFrame(()=>{c(!0)}),o()},[o]),(0,r.jsx)("div",{className:"\n        transform transition-all duration-300 ease-out\n        ".concat(s&&!u?"translate-x-0 opacity-100":"translate-x-full opacity-0","\n        ").concat("liquidation"===t.type?"animate-pulse-slow":"","\n      "),children:(0,r.jsxs)("div",{className:"\n          relative overflow-hidden rounded-xl shadow-lg border-2\n          ".concat(h.bg," ").concat(h.border,"\n          max-w-sm w-full p-4\n          ").concat("liquidation"===t.type?"ring-2 ring-orange-400 ring-opacity-50":"","\n        "),children:[t.autoClose&&(0,r.jsx)("div",{className:"absolute bottom-0 left-0 h-1 ".concat(h.icon," opacity-50"),style:{animation:"shrink ".concat(t.duration||5e3,"ms linear forwards")}}),(0,r.jsxs)("div",{className:"flex items-start gap-3",children:[(0,r.jsx)("div",{className:"\n              flex-shrink-0 w-10 h-10 rounded-full flex items-center justify-center\n              ".concat(h.icon,"\n              ").concat("liquidation"===t.type?"animate-bounce-subtle":"","\n              transition-transform hover:scale-110\n            "),children:(0,r.jsx)("span",{className:"text-lg font-bold",children:m})}),(0,r.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,r.jsxs)("div",{className:"flex items-center justify-between gap-2",children:[(0,r.jsx)("h4",{className:"font-semibold ".concat(h.text," truncate"),children:t.title}),(0,r.jsx)("span",{className:"text-xs text-gray-500 dark:text-gray-400 flex-shrink-0",children:(e=>{let t=Date.now()-e;return t<6e4?"Just now":t<36e5?"".concat(Math.floor(t/6e4),"m ago"):new Date(e).toLocaleTimeString()})(t.timestamp)})]}),(0,r.jsx)("p",{className:"text-sm text-gray-600 dark:text-gray-300 mt-1",children:t.message}),t.txHash&&(0,r.jsxs)("a",{href:"#tx-".concat(t.txHash),className:"inline-flex items-center gap-1 mt-2 text-xs text-primary-600 dark:text-primary-400 hover:underline",children:[(0,r.jsx)("span",{children:"View Transaction"}),(0,r.jsx)("svg",{className:"w-3 h-3",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M10 6H6a2 2 0 00-2 2v10a2 2 0 002 2h10a2 2 0 002-2v-4M14 4h6m0 0v6m0-6L10 14"})})]}),t.action&&(0,r.jsx)("button",{onClick:t.action.onClick,className:"\n                  mt-2 px-3 py-1 text-sm font-medium rounded-lg\n                  ".concat(h.icon," hover:opacity-90 transition-opacity\n                "),children:t.action.label})]}),(0,r.jsx)("button",{onClick:()=>{d(!0),setTimeout(()=>{a()},300)},className:"flex-shrink-0 p-1 rounded-full hover:bg-gray-200 dark:hover:bg-gray-700 transition-colors",children:(0,r.jsx)("svg",{className:"w-4 h-4 text-gray-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]})]})})}let c={success:"Completed",error:"Failed",warning:"Warnings",info:"Info",liquidation:"Liquidations"};function u(){let{notifications:e,unreadCount:t,removeNotification:a,markAsRead:i,markAllAsRead:l,clearAll:s}=(0,o.z)(),[u,h]=(0,n.useState)(!1),[m,b]=(0,n.useState)("all"),x="all"===m?e:e.filter(e=>e.type===m),f=e.reduce((e,t)=>(e[t.type]=(e[t.type]||0)+1,e),{}),p=e=>{let t=Date.now()-e;return t<6e4?"Just now":t<36e5?"".concat(Math.floor(t/6e4),"m ago"):t<864e5?"".concat(Math.floor(t/36e5),"h ago"):new Date(e).toLocaleDateString()};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)("button",{onClick:()=>h(!u),className:"relative p-2 rounded-full hover:bg-gray-100 dark:hover:bg-gray-700 transition-colors","aria-label":"Notifications",children:[(0,r.jsx)("svg",{className:"w-6 h-6 transition-transform ".concat(u?"scale-110":""," ").concat(t>0?"animate-wiggle":""),fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 17h5l-1.405-1.405A2.032 2.032 0 0118 14.158V11a6.002 6.002 0 00-4-5.659V5a2 2 0 10-4 0v.341C7.67 6.165 6 8.388 6 11v3.159c0 .538-.214 1.055-.595 1.436L4 17h5m6 0v1a3 3 0 11-6 0v-1m6 0H9"})}),t>0&&(0,r.jsx)("span",{className:"absolute -top-1 -right-1 flex items-center justify-center min-w-[20px] h-5 px-1.5 text-xs font-bold text-white bg-red-500 rounded-full animate-scale-in",children:t>9?"9+":t})]}),u&&(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("div",{className:"fixed inset-0 z-40",onClick:()=>h(!1)}),(0,r.jsxs)("div",{className:"absolute right-0 top-full mt-2 w-96 max-h-[70vh] bg-white dark:bg-gray-800 rounded-xl shadow-2xl border border-gray-200 dark:border-gray-700 z-50 overflow-hidden animate-slide-down",children:[(0,r.jsxs)("div",{className:"px-4 py-3 border-b border-gray-200 dark:border-gray-700 bg-gray-50 dark:bg-gray-750",children:[(0,r.jsxs)("div",{className:"flex items-center justify-between",children:[(0,r.jsx)("h3",{className:"font-semibold text-lg",children:"Notifications"}),(0,r.jsxs)("div",{className:"flex items-center gap-2",children:[t>0&&(0,r.jsx)("button",{onClick:l,className:"text-xs text-primary-600 dark:text-primary-400 hover:underline",children:"Mark all read"}),e.length>0&&(0,r.jsx)("button",{onClick:s,className:"text-xs text-gray-500 hover:text-gray-700 dark:hover:text-gray-300",children:"Clear all"})]})]}),(0,r.jsxs)("div",{className:"flex gap-1 mt-3 overflow-x-auto",children:[(0,r.jsxs)("button",{onClick:()=>b("all"),className:"px-3 py-1 text-xs font-medium rounded-full transition-colors ".concat("all"===m?"bg-primary-500 text-white":"bg-gray-200 dark:bg-gray-600 text-gray-700 dark:text-gray-300 hover:bg-gray-300 dark:hover:bg-gray-500"),children:["All (",e.length,")"]}),Object.entries(c).map(e=>{let[t,a]=e,n=f[t]||0;return 0===n?null:(0,r.jsxs)("button",{onClick:()=>b(t),className:"px-3 py-1 text-xs font-medium rounded-full whitespace-nowrap transition-colors ".concat(m===t?"bg-primary-500 text-white":"bg-gray-200 dark:bg-gray-600 text-gray-700 dark:text-gray-300 hover:bg-gray-300 dark:hover:bg-gray-500"),children:[a," (",n,")"]},t)})]})]}),(0,r.jsx)("div",{className:"overflow-y-auto max-h-[50vh]",children:0===x.length?(0,r.jsxs)("div",{className:"p-8 text-center text-gray-500",children:[(0,r.jsx)("svg",{className:"w-12 h-12 mx-auto mb-3 opacity-50",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M20 13V6a2 2 0 00-2-2H6a2 2 0 00-2 2v7m16 0v5a2 2 0 01-2 2H6a2 2 0 01-2-2v-5m16 0h-2.586a1 1 0 00-.707.293l-2.414 2.414a1 1 0 01-.707.293h-3.172a1 1 0 01-.707-.293l-2.414-2.414A1 1 0 006.586 13H4"})}),(0,r.jsx)("p",{className:"font-medium",children:"No notifications"}),(0,r.jsx)("p",{className:"text-sm mt-1",children:"You're all caught up!"})]}):(0,r.jsx)("div",{className:"divide-y divide-gray-100 dark:divide-gray-700",children:x.map(e=>(0,r.jsx)(d,{notification:e,onClose:()=>a(e.id),onRead:()=>i(e.id),formatTime:p},e.id))})})]})]})]})}function d(e){let{notification:t,onClose:a,onRead:n,formatTime:o}=e;return(0,r.jsx)("div",{className:"\n        p-4 hover:bg-gray-50 dark:hover:bg-gray-750 transition-colors cursor-pointer\n        ".concat(t.read?"":"bg-blue-50/50 dark:bg-blue-900/20","\n      "),onClick:n,children:(0,r.jsxs)("div",{className:"flex items-start gap-3",children:[(0,r.jsx)("div",{className:"flex-shrink-0 w-8 h-8 rounded-full flex items-center justify-center text-white text-sm ".concat({success:"bg-green-500",error:"bg-red-500",warning:"bg-yellow-500",info:"bg-blue-500",liquidation:"bg-gradient-to-r from-orange-500 to-red-500"}[t.type]),children:{success:"✓",error:"✕",warning:"⚠",info:"ℹ",liquidation:"\uD83D\uDD25"}[t.type]}),(0,r.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,r.jsxs)("div",{className:"flex items-center justify-between gap-2",children:[(0,r.jsx)("h4",{className:"font-medium text-sm truncate ".concat(t.read?"text-gray-700 dark:text-gray-300":"text-gray-900 dark:text-white"),children:t.title}),(0,r.jsx)("span",{className:"text-xs text-gray-400 flex-shrink-0",children:o(t.timestamp)})]}),(0,r.jsx)("p",{className:"text-sm text-gray-500 dark:text-gray-400 mt-0.5 line-clamp-2",children:t.message})]}),!t.read&&(0,r.jsx)("div",{className:"flex-shrink-0 w-2 h-2 bg-primary-500 rounded-full animate-pulse"}),(0,r.jsx)("button",{onClick:e=>{e.stopPropagation(),a()},className:"flex-shrink-0 p-1 rounded hover:bg-gray-200 dark:hover:bg-gray-600 transition-colors opacity-0 group-hover:opacity-100",children:(0,r.jsx)("svg",{className:"w-4 h-4 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]})})}function h(){let{notifications:e,removeNotification:t,markAsRead:a}=(0,o.z)(),n=e.filter(e=>Date.now()-e.timestamp<(e.duration||5e3)+500).slice(0,5);return(0,r.jsx)("div",{className:"fixed top-20 right-4 z-50 flex flex-col gap-3",children:n.map(e=>(0,r.jsx)(s,{notification:e,onClose:()=>t(e.id),onRead:()=>a(e.id)},e.id))})}},3727:function(e,t,a){a.d(t,{EducationalModeProvider:function(){return i},U:function(){return s},g:function(){return l}});var r=a(7437),n=a(2265);let o=(0,n.createContext)(null);function i(e){let{children:t}=e,[a,i]=(0,n.useState)({isEnabled:!1,currentTutorial:null,highlightedElement:null,showConceptCards:!0}),l=(0,n.useCallback)(()=>{i(e=>({...e,isEnabled:!e.isEnabled}))},[]),s=(0,n.useCallback)(()=>{i(e=>({...e,isEnabled:!0}))},[]),c=(0,n.useCallback)(()=>{i(e=>({...e,isEnabled:!1,currentTutorial:null,highlightedElement:null}))},[]),u=(0,n.useCallback)(e=>{i(t=>({...t,currentTutorial:e}))},[]),d=(0,n.useCallback)(()=>{i(e=>({...e,currentTutorial:null,highlightedElement:null}))},[]),h=(0,n.useCallback)(e=>{i(t=>({...t,highlightedElement:e}))},[]),m=(0,n.useCallback)(()=>{i(e=>({...e,showConceptCards:!e.showConceptCards}))},[]);return(0,r.jsx)(o.Provider,{value:{...a,toggleEducationalMode:l,enableEducationalMode:s,disableEducationalMode:c,startTutorial:u,endTutorial:d,highlightElement:h,toggleConceptCards:m},children:t})}function l(){let e=(0,n.useContext)(o);if(!e)throw Error("useEducationalMode must be used within an EducationalModeProvider");return e}let s={collateral:{id:"collateral",title:"Collateral",shortDescription:"Assets you deposit to secure a loan",fullExplanation:"Collateral is an asset that a borrower pledges to a lender as security for a loan. If the borrower fails to repay, the lender can seize the collateral. In DeFi, collateral is typically cryptocurrency that you deposit into a smart contract.",example:"If you deposit 10 ETH as collateral, you can borrow up to a certain percentage of its value in stablecoins.",icon:"\uD83C\uDFE6",relatedConcepts:["ltv","healthFactor"]},ltv:{id:"ltv",title:"Loan-to-Value (LTV)",shortDescription:"Ratio of loan amount to collateral value",fullExplanation:"LTV represents the percentage of your collateral value that you can borrow. A 75% LTV means you can borrow up to 75% of your collateral value. Higher LTV = more borrowing power but higher risk.",formula:"LTV = (Borrowed Amount / Collateral Value) \xd7 100%",example:"With $1000 in collateral and 75% LTV, you can borrow up to $750.",icon:"\uD83D\uDCCA",relatedConcepts:["collateral","healthFactor","liquidation"]},healthFactor:{id:"healthFactor",title:"Health Factor",shortDescription:"Safety indicator for your position",fullExplanation:"Health Factor measures how close your position is to liquidation. A value above 1.0 means you're safe. Below 1.0, your position can be liquidated. Higher health factor = safer position.",formula:"Health Factor = (Collateral \xd7 Liquidation Threshold) / Debt",example:"Health Factor of 2.0 means your collateral is worth twice the minimum required amount.",icon:"\uD83D\uDC93",relatedConcepts:["liquidation","collateral","ltv"]},liquidation:{id:"liquidation",title:"Liquidation",shortDescription:"When collateral is seized to repay debt",fullExplanation:"Liquidation occurs when your Health Factor drops below 1.0. Other users (liquidators) can repay part of your debt and receive your collateral at a discount. This protects the protocol from bad debt.",example:"If ETH price drops significantly, your collateral value decreases, potentially triggering liquidation.",icon:"⚠️",relatedConcepts:["healthFactor","collateral","liquidationThreshold"]},liquidationThreshold:{id:"liquidationThreshold",title:"Liquidation Threshold",shortDescription:"Maximum LTV before liquidation",fullExplanation:"The liquidation threshold is the maximum LTV ratio at which a position can be liquidated. If your LTV exceeds this threshold, liquidators can seize your collateral.",formula:"Position at risk when: LTV > Liquidation Threshold",example:"With an 80% liquidation threshold and 75% LTV, you have a 5% buffer before liquidation risk.",icon:"\uD83D\uDEA8",relatedConcepts:["liquidation","ltv","healthFactor"]},supplyApy:{id:"supplyApy",title:"Supply APY",shortDescription:"Interest earned on deposits",fullExplanation:"Supply APY (Annual Percentage Yield) is the interest rate you earn by depositing assets into the lending pool. It's calculated annually but accrues continuously based on borrowing demand.",formula:"Earnings = Principal \xd7 (1 + APY)^time - Principal",example:"10% APY on $1000 = ~$100 earned over one year.",icon:"\uD83D\uDCC8",relatedConcepts:["borrowApy","utilizationRate"]},borrowApy:{id:"borrowApy",title:"Borrow APY",shortDescription:"Interest paid on borrowed assets",fullExplanation:"Borrow APY is the interest rate you pay when borrowing assets. It's typically higher than Supply APY. The rate increases as more of the pool is borrowed (higher utilization).",formula:"Interest Owed = Borrowed Amount \xd7 (1 + APY)^time - Borrowed Amount",example:"Borrowing $1000 at 15% APY costs ~$150 in interest per year.",icon:"\uD83D\uDCC9",relatedConcepts:["supplyApy","utilizationRate"]},utilizationRate:{id:"utilizationRate",title:"Utilization Rate",shortDescription:"Percentage of pool being borrowed",fullExplanation:"Utilization rate shows how much of the deposited assets are currently being borrowed. Higher utilization leads to higher interest rates for both suppliers and borrowers.",formula:"Utilization = Total Borrowed / Total Supplied \xd7 100%",example:"If $800K is borrowed from a pool of $1M, utilization is 80%.",icon:"⚡",relatedConcepts:["supplyApy","borrowApy"]}}},6955:function(e,t,a){a.d(t,{NotificationProvider:function(){return i},U:function(){return s},z:function(){return l}});var r=a(7437),n=a(2265);let o=(0,n.createContext)(null);function i(e){let{children:t}=e,[a,i]=(0,n.useState)([]),l=(0,n.useCallback)(e=>{var t,a;let r="notification-".concat(Date.now(),"-").concat(Math.random().toString(36).substr(2,9)),n={...e,id:r,timestamp:Date.now(),read:!1,autoClose:null===(t=e.autoClose)||void 0===t||t,duration:null!==(a=e.duration)&&void 0!==a?a:5e3};return i(e=>[n,...e].slice(0,50)),n.autoClose&&setTimeout(()=>{s(r)},n.duration),r},[]),s=(0,n.useCallback)(e=>{i(t=>t.filter(t=>t.id!==e))},[]),c=(0,n.useCallback)(e=>{i(t=>t.map(t=>t.id===e?{...t,read:!0}:t))},[]),u=(0,n.useCallback)(()=>{i(e=>e.map(e=>({...e,read:!0})))},[]),d=(0,n.useCallback)(()=>{i([])},[]),h=a.filter(e=>!e.read).length;return(0,r.jsx)(o.Provider,{value:{notifications:a,unreadCount:h,addNotification:l,removeNotification:s,markAsRead:c,markAllAsRead:u,clearAll:d},children:t})}function l(){let e=(0,n.useContext)(o);if(!e)throw Error("useNotifications must be used within a NotificationProvider");return e}function s(){let{addNotification:e}=l(),t=(0,n.useCallback)((t,a)=>e({type:"info",title:"".concat(t," Started"),message:"".concat(t," ").concat(a," transaction initiated..."),autoClose:!1}),[e]),a=(0,n.useCallback)((t,a,r,n)=>e({type:"success",title:"".concat(t," Successful"),message:"Successfully ".concat(t.toLowerCase(),"ed ").concat(r," ").concat(a),txHash:n,duration:8e3}),[e]);return{notifyTransactionStart:t,notifyTransactionSuccess:a,notifyTransactionError:(0,n.useCallback)((t,a)=>e({type:"error",title:"".concat(t," Failed"),message:a,duration:1e4}),[e]),notifyLiquidationRisk:(0,n.useCallback)(t=>e({type:"liquidation",title:"⚠️ Liquidation Risk",message:"Your health factor is ".concat(t.toFixed(2),". Add collateral or repay debt to avoid liquidation."),autoClose:!1}),[e]),notifyLiquidationEvent:(0,n.useCallback)((t,a)=>e({type:"liquidation",title:"\uD83D\uDEA8 Liquidation Occurred",message:"".concat(a," ").concat(t," was liquidated from your position. Your debt has been reduced accordingly."),autoClose:!1}),[e])}}},6030:function(e,t,a){a.d(t,{SimulationProvider:function(){return u},b:function(){return d}});var r=a(7437),n=a(2265),o=a(1620);let i=(0,n.createContext)(void 0),l={WETH:2e3,DAI:1,USDC:1,LINK:15},s={WETH:.75,DAI:.8,USDC:.85,LINK:.7},c=()=>{let e={};for(let[t,a]of Object.entries(o.dA))e[t]={symbol:t,wallet:"WETH"===t?10:"DAI"===t?1e4:"USDC"===t?1e4:100,supplied:0,borrowed:0};return e};function u(e){let{children:t}=e,[a,o]=(0,n.useState)({isActive:!1,balances:c(),transactionHistory:[]}),u=(0,n.useCallback)(()=>{let e=0;for(let t of Object.values(a.balances)){let a=l[t.symbol]||0;e+=t.supplied*a}return e},[a.balances]),d=(0,n.useCallback)(()=>{let e=0;for(let t of Object.values(a.balances)){let a=l[t.symbol]||0;e+=t.borrowed*a}return e},[a.balances]),h=(0,n.useCallback)(()=>{let e=d();if(0===e)return 1/0;let t=0;for(let e of Object.values(a.balances)){let a=l[e.symbol]||0,r=s[e.symbol]||.75;t+=e.supplied*a*r}return t/e},[a.balances,d]),m=(0,n.useCallback)((e,t,a,r,n)=>{let i={id:"sim-".concat(Date.now(),"-").concat(Math.random().toString(36).substr(2,9)),type:e,symbol:t,amount:a,timestamp:Date.now(),healthFactorBefore:r,healthFactorAfter:n};o(e=>({...e,transactionHistory:[i,...e.transactionHistory].slice(0,50)}))},[]),b=(0,n.useCallback)((e,t)=>{let r=a.balances[e];if(!r||t<=0||t>r.wallet)return!1;let n=h();return o(a=>({...a,balances:{...a.balances,[e]:{...a.balances[e],wallet:a.balances[e].wallet-t,supplied:a.balances[e].supplied+t}}})),setTimeout(()=>{m("supply",e,t,n,h())},0),!0},[a.balances,h,m]),x=(0,n.useCallback)((e,t)=>{let r=a.balances[e];if(!r||t<=0||t>r.supplied)return!1;let n=l[e]||0,i=s[e]||.75,c=.75*u(),b=t*n*i,x=d();if(x>0&&(c-b)/x<1)return!1;let f=h();return o(a=>({...a,balances:{...a.balances,[e]:{...a.balances[e],wallet:a.balances[e].wallet+t,supplied:a.balances[e].supplied-t}}})),setTimeout(()=>{m("withdraw",e,t,f,h())},0),!0},[a.balances,u,d,h,m]),f=(0,n.useCallback)((e,t)=>{if(t<=0)return!1;let a=u();if(d()+t*(l[e]||0)>.75*a)return!1;let r=h();return o(a=>({...a,balances:{...a.balances,[e]:{...a.balances[e],wallet:a.balances[e].wallet+t,borrowed:a.balances[e].borrowed+t}}})),setTimeout(()=>{m("borrow",e,t,r,h())},0),!0},[u,d,h,m]),p=(0,n.useCallback)((e,t)=>{let r=a.balances[e];if(!r||t<=0||t>r.borrowed||t>r.wallet)return!1;let n=h();return o(a=>({...a,balances:{...a.balances,[e]:{...a.balances[e],wallet:a.balances[e].wallet-t,borrowed:a.balances[e].borrowed-t}}})),setTimeout(()=>{m("repay",e,t,n,h())},0),!0},[a.balances,h,m]),w=(0,n.useCallback)(()=>{o(e=>({...e,isActive:!0}))},[]),g=(0,n.useCallback)(()=>{o(e=>({...e,isActive:!1}))},[]),y=(0,n.useCallback)(()=>{o({isActive:a.isActive,balances:c(),transactionHistory:[]})},[a.isActive]);return(0,r.jsx)(i.Provider,{value:{isSimulationMode:a.isActive,startSimulation:w,stopSimulation:g,resetSimulation:y,simulatedBalances:a.balances,simulatedTransactions:a.transactionHistory,simulateSupply:b,simulateWithdraw:x,simulateBorrow:f,simulateRepay:p,getSimulatedHealthFactor:h,getSimulatedTotalCollateral:u,getSimulatedTotalBorrows:d},children:t})}function d(){let e=(0,n.useContext)(i);if(!e)throw Error("useSimulation must be used within a SimulationProvider");return e}},6653:function(e,t,a){a.d(t,{$:function(){return u},Web3Provider:function(){return c}});var r=a(7437),n=a(2265),o=a(9146),i=a(9064),l=a(1620);let s=(0,n.createContext)(void 0);function c(e){let{children:t}=e,[a,c]=(0,n.useState)(null),[u,d]=(0,n.useState)(null),[h,m]=(0,n.useState)(""),[b,x]=(0,n.useState)(!1),[f,p]=(0,n.useState)(0),w=async()=>{if(void 0!==window.ethereum)try{await window.ethereum.request({method:"wallet_switchEthereumChain",params:[{chainId:"0x".concat(l.Kj.toString(16))}]})}catch(e){if(4902===e.code)try{await window.ethereum.request({method:"wallet_addEthereumChain",params:[{chainId:"0x".concat(l.Kj.toString(16)),chainName:"Hardhat Local",rpcUrls:["http://127.0.0.1:8545"],nativeCurrency:{name:"ETH",symbol:"ETH",decimals:18}}]})}catch(e){console.error("Error adding network:",e),i.ZP.error("Failed to add network")}else console.error("Error switching network:",e),i.ZP.error("Failed to switch network")}},g=async()=>{if(void 0===window.ethereum){i.ZP.error("MetaMask is not installed");return}try{let e=new o.Q(window.ethereum),t=await e.send("eth_requestAccounts",[]),a=await e.getSigner(),r=await e.getNetwork();c(e),d(a),m(t[0]),p(Number(r.chainId)),x(!0),i.ZP.success("Wallet connected successfully!")}catch(e){console.error("Error connecting wallet:",e),i.ZP.error(e.message||"Failed to connect wallet")}},y=()=>{c(null),d(null),m(""),p(0),x(!1),i.ZP.success("Wallet disconnected")};return(0,n.useEffect)(()=>{if(void 0===window.ethereum)return;let e=e=>{0===e.length?y():e[0]!==h&&(m(e[0]),i.ZP.success("Account changed"))},t=e=>{p(parseInt(e,16)),i.ZP.success("Network changed"),window.location.reload()},a=()=>{y()};return window.ethereum.on("accountsChanged",e),window.ethereum.on("chainChanged",t),window.ethereum.on("disconnect",a),()=>{window.ethereum.removeListener("accountsChanged",e),window.ethereum.removeListener("chainChanged",t),window.ethereum.removeListener("disconnect",a)}},[h]),(0,n.useEffect)(()=>{(async()=>{if(void 0!==window.ethereum)try{let e=new o.Q(window.ethereum),t=await e.send("eth_accounts",[]);if(t.length>0){let a=await e.getSigner(),r=await e.getNetwork();c(e),d(a),m(t[0]),p(Number(r.chainId)),x(!0)}}catch(e){console.error("Auto-connect failed:",e)}})()},[]),(0,r.jsx)(s.Provider,{value:{provider:a,signer:u,account:h,isConnected:b,chainId:f,connect:g,disconnect:y,switchNetwork:w},children:t})}function u(){let e=(0,n.useContext)(s);if(void 0===e)throw Error("useWeb3 must be used within a Web3Provider");return e}},1620:function(e,t,a){a.d(t,{ERC20_ABI:function(){return o},Kj:function(){return u},LENDING_POOL_ABI:function(){return r},M2:function(){return s},NP:function(){return n},NX:function(){return i},dA:function(){return c},jk:function(){return l},qp:function(){return d}});let r=["function deposit(address token, uint256 amount) external","function withdraw(address token, uint256 amount) external","function borrow(address token, uint256 amount) external","function repay(address token, uint256 amount) external","function getUserDeposit(address user, address token) external view returns (uint256)","function getUserBorrow(address user, address token) external view returns (uint256)","function getTokenBalance(address token) external view returns (uint256)","function calculateHealthFactor(address user) external view returns (uint256)","function getBorrowRate(address token) external view returns (uint256)","function getSupplyRate(address token) external view returns (uint256)","function supportedTokens(uint256) external view returns (address)","function tokenConfigs(address) external view returns (address tokenAddress, uint16 ltv, bool isActive)","function getUserLARRewards(address user) external view returns (uint256)","function getSupportedTokensCount() external view returns (uint256)","function totalDeposits(address) external view returns (uint256)","function totalBorrows(address) external view returns (uint256)","function getUserAccountData(address user) external view returns (uint256 totalCollateralUSD, uint256 totalDebtUSD, uint256 availableBorrowsUSD, uint256 healthFactor)","event Deposit(address indexed user, address indexed token, uint256 amount, uint256 larMinted)","event Withdraw(address indexed user, address indexed token, uint256 amount)","event Borrow(address indexed user, address indexed token, uint256 amount, uint256 interestRate)","event Repay(address indexed user, address indexed token, uint256 amount, uint256 interest)"],n=["function balanceOf(address account) external view returns (uint256)","function totalSupply() external view returns (uint256)","function transfer(address to, uint256 amount) external returns (bool)","function approve(address spender, uint256 amount) external returns (bool)","function allowance(address owner, address spender) external view returns (uint256)","function decimals() external view returns (uint8)","function symbol() external view returns (string)","function name() external view returns (string)"],o=["function balanceOf(address account) external view returns (uint256)","function transfer(address to, uint256 amount) external returns (bool)","function approve(address spender, uint256 amount) external returns (bool)","function allowance(address owner, address spender) external view returns (uint256)","function decimals() external view returns (uint8)","function symbol() external view returns (string)","function name() external view returns (string)","function mint(address to, uint256 amount) external"],i=["function getPrice(address token) external view returns (uint256)","function updatePrice(address token) external"],l=["function calculateBorrowRate(uint256 borrowed, uint256 supplied) external view returns (uint256)","function calculateSupplyRate(uint256 borrowed, uint256 supplied, uint256 reserveFactor) external view returns (uint256)"],s={LendingPool:"0xAA292E8611aDF267e563f334Ee42320aC96D0463",LARToken:"0xA4899D35897033b927acFCf422bc745916139776",InterestRateModel:"0xf953b3A269d80e3eB0F2947630Da976B896A8C5b",PriceOracle:"0x4C2F7092C2aE51D986bEFEe378e50BD4dB99C901",WETH:"0xBEc49fA140aCaA83533fB00A2BB19bDdd0290f25",DAI:"0xD84379CEae14AA33C123Af12424A37803F885889",USDC:"0x2B0d36FACD61B71CC05ab8F3D2355ec3631C0dd5",LINK:"0xfbC22278A96299D91d41C453234d97b4F5Eb9B2d"},c={WETH:{symbol:"WETH",name:"Wrapped Ether",decimals:18,address:s.WETH,collateralFactor:.75,liquidationThreshold:.8},DAI:{symbol:"DAI",name:"Dai Stablecoin",decimals:18,address:s.DAI,collateralFactor:.8,liquidationThreshold:.85},USDC:{symbol:"USDC",name:"USD Coin",decimals:6,address:s.USDC,collateralFactor:.8,liquidationThreshold:.85},LINK:{symbol:"LINK",name:"Chainlink",decimals:18,address:s.LINK,collateralFactor:.7,liquidationThreshold:.75}};Object.values(c);let u=Number("31337")||31337,d={1:"Ethereum Mainnet",31337:"Hardhat Local",11155111:"Sepolia Testnet"}}}]);