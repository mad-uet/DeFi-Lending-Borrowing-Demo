(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[109],{7631:function(e,t,r){Promise.resolve().then(r.bind(r,1603))},1603:function(e,t,r){"use strict";r.r(t),r.d(t,{default:function(){return x}});var a=r(7437),s=r(2265),l=r(6653),i=r(3599),d=r(1662),n=r(7648),o=r(3339),c=r(1620);function x(){let{isConnected:e,chainId:t}=(0,l.$)(),r=(0,i.c)("LendingPool"),x=(0,i.c)("PriceOracle"),m=(0,i.c)("LARToken"),[h,g]=(0,s.useState)(null),[u,y]=(0,s.useState)([]),[b,p]=(0,s.useState)(!0),[f,j]=(0,s.useState)(null),w=[{address:c.M2.WETH,symbol:"WETH",decimals:18},{address:c.M2.DAI,symbol:"DAI",decimals:18},{address:c.M2.USDC,symbol:"USDC",decimals:6},{address:c.M2.LINK,symbol:"LINK",decimals:18}],N=(0,s.useCallback)(async()=>{if(r&&x&&m)try{j(null),p(!0);let e=0,t=0,a=[];for(let s of w)if(s.address)try{if(!(await r.tokenConfigs(s.address)).isActive)continue;let[l,i,n,o,c]=await Promise.all([r.totalDeposits(s.address),r.totalBorrows(s.address),x.getPrice(s.address),r.getBorrowRate(s.address),r.getSupplyRate(s.address)]),m=(0,d.bM)(l,s.decimals),h=(0,d.bM)(i,s.decimals),g=(0,d.bM)(n,18),u=parseFloat(m)*parseFloat(g),y=parseFloat(h)*parseFloat(g);e+=u,t+=y;let b=l>0n?Number(10000n*i/l)/100:0,p=Number(o)/100,f=Number(c)/100;a.push({token:s.address,symbol:s.symbol,totalDeposits:m,totalBorrows:h,utilizationRate:b,supplyAPY:f,borrowAPY:p,price:g,tvlUSD:u,borrowedUSD:y})}catch(e){console.warn("Error fetching data for ".concat(s.symbol,":"),e)}let s="0";try{let e=await m.totalSupply();s=(0,d.bM)(e,18)}catch(e){console.warn("Error fetching LAR supply:",e)}let l=e>0?t/e*100:0;g({totalValueLockedUSD:e,totalBorrowedUSD:t,totalSuppliedUSD:e,overallUtilizationRate:l,larTokensInCirculation:s}),y(a)}catch(e){console.error("Error fetching analytics:",e),j(e.message||"Failed to fetch analytics")}finally{p(!1)}},[r,x,m]);(0,s.useEffect)(()=>{if(e&&t===c.Kj&&r&&x&&m){N();let e=setInterval(N,1e4);return()=>clearInterval(e)}},[e,t,r,x,m,N]);let k=e=>isNaN(e)||!isFinite(e)?"$0.00":new Intl.NumberFormat("en-US",{style:"currency",currency:"USD",minimumFractionDigits:2,maximumFractionDigits:2}).format(e),v=e=>{let t=parseFloat(e);return isNaN(t)||!isFinite(t)?"0.00":new Intl.NumberFormat("en-US",{minimumFractionDigits:2,maximumFractionDigits:2}).format(t)};return e?t!==c.Kj?(0,a.jsxs)("main",{className:"min-h-screen bg-gradient-to-br from-gray-50 to-gray-100 dark:from-gray-900 dark:to-gray-800",children:[(0,a.jsx)(o.h,{}),(0,a.jsx)("div",{className:"container mx-auto px-4 py-20",children:(0,a.jsxs)("div",{className:"max-w-md mx-auto bg-white dark:bg-gray-800 rounded-2xl shadow-xl p-8 text-center animate-fade-in",children:[(0,a.jsx)("div",{className:"w-16 h-16 bg-gradient-to-br from-amber-500 to-orange-600 rounded-full mx-auto mb-4 flex items-center justify-center",children:(0,a.jsx)("span",{className:"text-2xl",children:"⚠️"})}),(0,a.jsx)("h2",{className:"text-xl font-semibold text-gray-900 dark:text-white mb-4",children:"Wrong Network"}),(0,a.jsxs)("p",{className:"text-gray-600 dark:text-gray-400 mb-6",children:["Please switch to Hardhat Local network (Chain ID: ",c.Kj,")"]}),(0,a.jsx)(n.default,{href:"/",className:"inline-block px-6 py-3 bg-gradient-to-r from-primary-500 to-primary-600 text-white rounded-lg font-medium hover:from-primary-600 hover:to-primary-700 transition-all transform hover:scale-[1.02]",children:"Go to Dashboard"})]})})]}):(0,a.jsxs)("main",{className:"min-h-screen bg-gradient-to-br from-gray-50 to-gray-100 dark:from-gray-900 dark:to-gray-800",children:[(0,a.jsx)(o.h,{}),(0,a.jsxs)("div",{className:"container mx-auto px-4 py-8",children:[f&&(0,a.jsx)("div",{className:"mb-6 p-4 bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-800 rounded-xl animate-fade-in",children:(0,a.jsxs)("p",{className:"text-red-700 dark:text-red-300 flex items-center gap-2",children:[(0,a.jsx)("span",{children:"❌"})," Error: ",f]})}),b&&!h?(0,a.jsxs)("div",{className:"flex flex-col justify-center items-center h-64 gap-4",children:[(0,a.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-4 border-primary-200 border-t-primary-500"}),(0,a.jsx)("p",{className:"text-gray-500 dark:text-gray-400 animate-pulse",children:"Loading analytics..."})]}):(0,a.jsxs)(a.Fragment,{children:[h&&(0,a.jsxs)("div",{className:"mb-8 animate-fade-in-up",children:[(0,a.jsxs)("h2",{className:"text-xl font-semibold text-gray-900 dark:text-white mb-4 flex items-center gap-2",children:[(0,a.jsx)("span",{children:"\uD83D\uDCCA"})," Protocol Overview"]}),(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:[(0,a.jsxs)("div",{className:"bg-white dark:bg-gray-800 rounded-2xl shadow-lg p-6 hover:shadow-xl transition-shadow border border-gray-100 dark:border-gray-700",children:[(0,a.jsxs)("div",{className:"flex items-center gap-3 mb-3",children:[(0,a.jsx)("div",{className:"w-10 h-10 bg-gradient-to-br from-green-400 to-green-600 rounded-xl flex items-center justify-center",children:(0,a.jsx)("span",{className:"text-white text-lg",children:"\uD83D\uDD12"})}),(0,a.jsx)("div",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Total Value Locked"})]}),(0,a.jsx)("div",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:k(h.totalValueLockedUSD)})]}),(0,a.jsxs)("div",{className:"bg-white dark:bg-gray-800 rounded-2xl shadow-lg p-6 hover:shadow-xl transition-shadow border border-gray-100 dark:border-gray-700",children:[(0,a.jsxs)("div",{className:"flex items-center gap-3 mb-3",children:[(0,a.jsx)("div",{className:"w-10 h-10 bg-gradient-to-br from-purple-400 to-purple-600 rounded-xl flex items-center justify-center",children:(0,a.jsx)("span",{className:"text-white text-lg",children:"\uD83D\uDCB8"})}),(0,a.jsx)("div",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Total Borrowed"})]}),(0,a.jsx)("div",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:k(h.totalBorrowedUSD)})]}),(0,a.jsxs)("div",{className:"bg-white dark:bg-gray-800 rounded-2xl shadow-lg p-6 hover:shadow-xl transition-shadow border border-gray-100 dark:border-gray-700",children:[(0,a.jsxs)("div",{className:"flex items-center gap-3 mb-3",children:[(0,a.jsx)("div",{className:"w-10 h-10 bg-gradient-to-br from-blue-400 to-blue-600 rounded-xl flex items-center justify-center",children:(0,a.jsx)("span",{className:"text-white text-lg",children:"\uD83D\uDCC8"})}),(0,a.jsx)("div",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Overall Utilization"})]}),(0,a.jsxs)("div",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:[h.overallUtilizationRate.toFixed(2),"%"]}),(0,a.jsx)("div",{className:"mt-2 w-full bg-gray-200 dark:bg-gray-700 rounded-full h-2",children:(0,a.jsx)("div",{className:"bg-gradient-to-r from-blue-400 to-blue-600 h-2 rounded-full transition-all",style:{width:"".concat(Math.min(h.overallUtilizationRate,100),"%")}})})]}),(0,a.jsxs)("div",{className:"bg-white dark:bg-gray-800 rounded-2xl shadow-lg p-6 hover:shadow-xl transition-shadow border border-gray-100 dark:border-gray-700",children:[(0,a.jsxs)("div",{className:"flex items-center gap-3 mb-3",children:[(0,a.jsx)("div",{className:"w-10 h-10 bg-gradient-to-br from-amber-400 to-amber-600 rounded-xl flex items-center justify-center",children:(0,a.jsx)("span",{className:"text-white text-lg",children:"\uD83E\uDE99"})}),(0,a.jsx)("div",{className:"text-sm text-gray-500 dark:text-gray-400",children:"LAR in Circulation"})]}),(0,a.jsx)("div",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:v(h.larTokensInCirculation)})]})]})]}),(0,a.jsxs)("div",{className:"animate-fade-in-up",style:{animationDelay:"0.1s"},children:[(0,a.jsxs)("h2",{className:"text-xl font-semibold text-gray-900 dark:text-white mb-4 flex items-center gap-2",children:[(0,a.jsx)("span",{children:"\uD83C\uDFE6"})," Token Markets"]}),0===u.length?(0,a.jsxs)("div",{className:"bg-white dark:bg-gray-800 rounded-2xl shadow-lg p-8 text-center border border-gray-100 dark:border-gray-700",children:[(0,a.jsx)("div",{className:"w-16 h-16 bg-gray-100 dark:bg-gray-700 rounded-full mx-auto mb-4 flex items-center justify-center",children:(0,a.jsx)("span",{className:"text-2xl",children:"\uD83D\uDCED"})}),(0,a.jsx)("p",{className:"text-gray-500 dark:text-gray-400",children:"No active token markets found."})]}):(0,a.jsx)("div",{className:"bg-white dark:bg-gray-800 rounded-2xl shadow-lg overflow-hidden border border-gray-100 dark:border-gray-700",children:(0,a.jsx)("div",{className:"overflow-x-auto",children:(0,a.jsxs)("table",{className:"w-full",children:[(0,a.jsx)("thead",{className:"bg-gradient-to-r from-gray-50 to-gray-100 dark:from-gray-700 dark:to-gray-800",children:(0,a.jsxs)("tr",{children:[(0,a.jsx)("th",{className:"px-6 py-4 text-left text-xs font-semibold text-gray-600 dark:text-gray-300 uppercase tracking-wider",children:"Asset"}),(0,a.jsx)("th",{className:"px-6 py-4 text-right text-xs font-semibold text-gray-600 dark:text-gray-300 uppercase tracking-wider",children:"Total Supplied"}),(0,a.jsx)("th",{className:"px-6 py-4 text-right text-xs font-semibold text-gray-600 dark:text-gray-300 uppercase tracking-wider",children:"Total Borrowed"}),(0,a.jsx)("th",{className:"px-6 py-4 text-right text-xs font-semibold text-gray-600 dark:text-gray-300 uppercase tracking-wider",children:"Supply APY"}),(0,a.jsx)("th",{className:"px-6 py-4 text-right text-xs font-semibold text-gray-600 dark:text-gray-300 uppercase tracking-wider",children:"Borrow APY"}),(0,a.jsx)("th",{className:"px-6 py-4 text-right text-xs font-semibold text-gray-600 dark:text-gray-300 uppercase tracking-wider",children:"Utilization"}),(0,a.jsx)("th",{className:"px-6 py-4 text-right text-xs font-semibold text-gray-600 dark:text-gray-300 uppercase tracking-wider",children:"TVL (USD)"})]})}),(0,a.jsx)("tbody",{className:"divide-y divide-gray-200 dark:divide-gray-700",children:u.map(e=>(0,a.jsxs)("tr",{className:"hover:bg-gray-50 dark:hover:bg-gray-700/50 transition-colors",children:[(0,a.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,a.jsxs)("div",{className:"flex items-center",children:[(0,a.jsx)("div",{className:"w-10 h-10 bg-gradient-to-br from-primary-400 to-primary-600 rounded-xl flex items-center justify-center text-white text-sm font-bold mr-3 shadow-sm",children:e.symbol.slice(0,2)}),(0,a.jsxs)("div",{children:[(0,a.jsx)("div",{className:"text-sm font-semibold text-gray-900 dark:text-white",children:e.symbol}),(0,a.jsxs)("div",{className:"text-xs text-gray-500 dark:text-gray-400",children:["$",parseFloat(e.price).toFixed(2)]})]})]})}),(0,a.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-right text-sm text-gray-900 dark:text-white font-medium",children:v(e.totalDeposits)}),(0,a.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-right text-sm text-gray-900 dark:text-white font-medium",children:v(e.totalBorrows)}),(0,a.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-right text-sm",children:(0,a.jsxs)("span",{className:"px-2 py-1 bg-green-100 dark:bg-green-900/30 text-green-700 dark:text-green-400 rounded-lg font-semibold",children:[e.supplyAPY.toFixed(2),"%"]})}),(0,a.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-right text-sm",children:(0,a.jsxs)("span",{className:"px-2 py-1 bg-orange-100 dark:bg-orange-900/30 text-orange-700 dark:text-orange-400 rounded-lg font-semibold",children:[e.borrowAPY.toFixed(2),"%"]})}),(0,a.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-right text-sm text-gray-900 dark:text-white",children:(0,a.jsxs)("div",{className:"flex items-center justify-end gap-2",children:[(0,a.jsx)("div",{className:"w-20 bg-gray-200 dark:bg-gray-700 rounded-full h-2",children:(0,a.jsx)("div",{className:"bg-gradient-to-r from-primary-400 to-primary-600 h-2 rounded-full transition-all",style:{width:"".concat(Math.min(e.utilizationRate,100),"%")}})}),(0,a.jsxs)("span",{className:"font-medium w-12 text-right",children:[e.utilizationRate.toFixed(1),"%"]})]})}),(0,a.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-right text-sm font-bold text-gray-900 dark:text-white",children:k(e.tvlUSD)})]},e.token))})]})})})]}),(0,a.jsx)("div",{className:"mt-8 bg-gradient-to-r from-blue-50 to-indigo-50 dark:from-blue-900/20 dark:to-indigo-900/20 rounded-2xl p-5 border border-blue-200 dark:border-blue-800 animate-fade-in-up",style:{animationDelay:"0.2s"},children:(0,a.jsxs)("div",{className:"flex items-start gap-3",children:[(0,a.jsx)("div",{className:"w-10 h-10 bg-blue-100 dark:bg-blue-900/50 rounded-xl flex items-center justify-center flex-shrink-0",children:(0,a.jsx)("span",{className:"text-xl",children:"\uD83D\uDCA1"})}),(0,a.jsxs)("div",{children:[(0,a.jsx)("h4",{className:"font-semibold text-blue-800 dark:text-blue-200 mb-1",children:"Analytics Update"}),(0,a.jsx)("p",{className:"text-sm text-blue-700 dark:text-blue-300",children:"Data refreshes every 10 seconds. LAR tokens are minted 1:1 with USD value of deposits."})]})]})})]})]})]}):(0,a.jsxs)("main",{className:"min-h-screen bg-gradient-to-br from-gray-50 to-gray-100 dark:from-gray-900 dark:to-gray-800",children:[(0,a.jsx)(o.h,{}),(0,a.jsx)("div",{className:"container mx-auto px-4 py-20",children:(0,a.jsxs)("div",{className:"max-w-md mx-auto bg-white dark:bg-gray-800 rounded-2xl shadow-xl p-8 text-center animate-fade-in",children:[(0,a.jsx)("div",{className:"w-16 h-16 bg-gradient-to-br from-primary-500 to-primary-600 rounded-full mx-auto mb-4 flex items-center justify-center",children:(0,a.jsx)("span",{className:"text-2xl",children:"\uD83D\uDCCA"})}),(0,a.jsx)("h2",{className:"text-xl font-semibold text-gray-900 dark:text-white mb-4",children:"Connect Your Wallet"}),(0,a.jsx)("p",{className:"text-gray-600 dark:text-gray-400 mb-6",children:"Please connect your wallet to view protocol analytics"}),(0,a.jsx)(n.default,{href:"/",className:"inline-block px-6 py-3 bg-gradient-to-r from-primary-500 to-primary-600 text-white rounded-lg font-medium hover:from-primary-600 hover:to-primary-700 transition-all transform hover:scale-[1.02]",children:"Go to Dashboard"})]})})]})}},3599:function(e,t,r){"use strict";r.d(t,{c:function(){return d}});var a=r(2265),s=r(5810),l=r(6653),i=r(1620);function d(e,t){let{signer:r,provider:d}=(0,l.$)();return(0,a.useMemo)(()=>{let a,l;if(!r&&!d)return null;switch(e){case"LendingPool":a=i.LENDING_POOL_ABI,l=t||i.M2.LendingPool;break;case"LARToken":a=i.NP,l=t||i.M2.LARToken;break;case"ERC20":a=i.ERC20_ABI,l=t||"";break;case"PriceOracle":a=i.NX,l=t||i.M2.PriceOracle;break;case"InterestRateModel":a=i.jk,l=t||i.M2.InterestRateModel;break;default:return null}return l?new s.CH(l,a,r||d):null},[e,t,r,d])}}},function(e){e.O(0,[191,219,439,339,971,117,744],function(){return e(e.s=7631)}),_N_E=e.O()}]);